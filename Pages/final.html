<!DOCTYPE html>
	<html lang="en">	
		<head>
			<title>Kids Countdown Timer</title>
			<meta charset="utf-8">
			<meta name="description" content="CIT 261 Sandbox">
			<meta name="Matt" content="CIT 261">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			
			<style>
				* {
					box-sizing:  border-box;}
				
				body {
					margin: 0;}
					
				body.day {
					background-image:  url("../Media/day.png");
					background-color: #cccccc;
					background-repeat:  no-repeat;
					background-position:  center;
					background-attachment:  fixed;
					-webkit-background-size: cover;
					-moz-background-size: cover;
					-o-background-size: cover;
					background-size: cover;}
					
				body.night {
					background-image:  url("../Media/night.png");
					background-color: #cccccc;
					background-repeat:  no-repeat;
					background-position:  center;
					background-attachment:  fixed;
					-webkit-background-size: cover;
					-moz-background-size: cover;
					-o-background-size: cover;
					background-size: cover;}
					
				.header {
					display:  inline-block;
					position: relative;
					float: right;
					background-color:  #333;
					opacity: 0.75;
					color:  #f2f2f2;
					text-align:  center;
					padding: 5px 16px;}
					
				.topnav {
					overflow:  auto;
					background-color:  #333;
					opacity: 0.75;}
					
				.topnav div {
					float:  left;
					display:  inline-block;
					position: relative;
					color:  #f2f2f2;
					text-align:  center;
					padding: 14px 50px;
					text-decoration:  none;}
					
				.topnav div:hover {
					background-color: #ddd;
					color: black;}
					
				#dropDownContent1 {
					max-width: 300px;
					display: none;}
					
				#dropDownContent2 {
					max-width: 300px;
					display: none;}
					
				#dropDownContent3 {
					max-width: 300px;
					display: none;}
					
				#dropDownContent4 {
					max-width: 300px;
					display: none;}
					
				.cloud {
					max-width: 10%;
					visibility: none;
					position: fixed;
					left: 0%;
					z-index: -1;
					-webkit-animation-name: cloudy;
					-webkit-animation-iteration-count: infinite;
					-webkit-animation-duration: 90s;
					-webkit-animation-timing-function: linear;
					animation-name: cloudy;
					animation-iteration-count: infinite;
					animation-duration: 90s;
					animation-timing-function: linear;}
					
				@-webkit-keyframes cloudy{
					0%{left: 0%}
					50%{left: 100%}
					100%{left: 0%}}
					
				keyframes cloudy{
					0%{left: 0%}
					50%{left: 100%}
					100%{left: 0%}}
					
				.star {
					max-width: 10%;
					visibility: none;
					position: fixed;
					right: 0%;
					top: 0%;
					z-index: -1;
					-webkit-animation-name: fallingStar;
					-webkit-animation-iteration-count: infinite;
					-webkit-animation-duration: 4s;
					-webkit-animation-timing-function: linear;
					-webkit-animation-delay: 2s;
					animation-name: fallingStar;
					animation-iteration-count: infinite;
					animation-duration: 4s;
					animation-timing-function: linear;
					animation-delay: 2s;}
					
				@-webkit-keyframes fallingStar{
					0%{right: 0%; top: 0%;}
					100%{right: 100%; top: 100%;}}
					
				keyframes fallingStar{
					0%{right: 0%; top: 0%;}
					100%{right: 100%; top: 100%;}}
					
				.column {
					float:  left;
					padding: 20px;}
					
				.column.side {
					max-width: 25%;
					color: #000000;}
					
				.weather {
					border-radius: 10%;
					color: #000000;
					background-color: #f1f1f1;
					opacity: 0.80;
					text-align: center;}
					
				.frame {
					max-height: 100px;
					overflow: hidden;
					border-radius: 10%;
					color: #000000;
					background-color: #f1f1f1;
					opacity: 0.80;
					text-align: center;}
					
				.frame:hover {
					max-height: 600px;
					overflow: auto;}
					
				.column.middle {
					max-width: 50%;
					border: 5px solid yellow;
					border-radius: 10%;
					color: #000000;
					background-color: #f1f1f1;
					opacity: 0.75;
					height: 700px;
					max-height: 700px;}
					
				.row:after {
					content: "";
					display: table;
					clear:  both;}
						
				.timer {
					max-width: 50%;
					height: 65%;
					max-height: 65%;
					border: 10px dashed yellow;
					border-radius: 10%;
					color: #000000;
					background-color: #60cd3d;
					margin: auto;
					-webkit-animation:  none;
					animation: none;
					-webkit-animation-play-state: running;
					animation-play-state: running;}
					
				@keyframes startTimer {
					0% {height: 65%; background-color: #60cd3d; border-radius: 10%; border: 10px dashed yellow;}
					50% {height: 32.5%; background-color: yellow; border-radius: 100%; border: 20px dashed red;}
					100% {height: 0%; background-color: red; border-radius: 10%; border: 10px dashed yellow;}}
					
				@-webkit-keyframes startTimer {
					0% {height: 65%; background-color: #60cd3d; border-radius: 10%; border: 10px dashed yellow;}
					50% {height: 32.5%; background-color: yellow; border-radius: 100%; border: 20px dashed red;}
					100% {height: 0%; background-color: red; border-radius: 10%; border: 10px dashed yellow;}}
					
				.buttons {
					padding: 20px;
					margin: auto;
					text-align: justify;}
					
				.options {
					border-radius: 75%;
					max-width: 10%;
					background-color: #fff87d;
					box-shadow: 0px 0px 5px 2px;}
					
				.largeImg {
					max-width: 30%;
					border-radius: 100%;
					border: outset;
					box-shadow: 0 9px #999;
					background-color: #4caf50;
					cursor: pointer;}
					
				.largeImg:active {
					background-color: #3e8e41;
					border: inset;
					box-shadow: 0 5px #666;
					transform: translateY(4px);}
					
				.smallImg {
					max-width: 10%;
					border-radius: 100%;
					border: outset;
					box-shadow: 0 9px #999;
					background-color: #4caf50;
					cursor: pointer;}
					
				.smallImg:active {
					background-color: #3e8e41;
					border: inset;
					box-shadow: 0 5px #666;
					transform: translateY(4px);}
					
				#horse {
					visibility: visible;
					position: fixed;
					max-width: 20%;
					right: 5%;
					bottom: 0%;
					-webkit-transition: right 2s linear, -webkit-transform 2.5s;
					transition: right 2s linear, transform 2.5s;}
					
				#rocket {
					visibility: hidden;
					position: fixed;
					max-width: 20%;
					right: 5%;
					bottom: 0%;
					-webkit-transition: right 2s linear, -webkit-transform 2.5s;
					transition: right 2s linear, transform 2.5s;}
					
				@media (max-width: 600px) {
					.column.side, .column.middle {
						max-width: 100%;}
						
					.topnav div {
						display: block;
						}
						
					.header {
						display: block;
						float: none;}}
					
			</style>
			
		</head>
		
		<body class="day" id="body">
		
			<div class="header">
				<header>Kid Countdown Timer</header>
				<div id="clock"></div>
			</div>
			
			<img id="star" class="star" src="../Media/star.PNG"></img>
			
			<div class="topnav">
				<div id="content1" onmouseenter="dropDown(this.id)" onmouseleave="dropUp(this.id)">
					<span>Description</span>
						<p id="dropDownContent1">Is it a battle to get your child to do something quickly?  This visual
						countdown App was designed for my 2-year-old son to help him get his
						reward chart star for getting dressed quickly.  Getting him dressed used
						to take forever with many stalling strategies being deployed.  Now he runs
						upstairs asking for the "Countdown". (Childrens Countdown Timer, Fehners Software LLP)</p>
				</div>
				<div id="content2" onmouseenter="dropDown(this.id)" onmouseleave="dropUp(this.id)">
					<span>How to Use</span>
					<p id="dropDownContent2">In order to use this timer, simply select the desired amount of time, click
					the big green start/play button, and the timer will start.  If you need to stop the timer for any reason,
					simply push the stop button.</p>
				</div>
				<div id="content3" onmouseenter="dropDown(this.id)" onmouseleave="dropUp(this.id)">
					<span>Info</span>
					<p id="dropDownContent3">This App has been developed by MES Software LLP (fictitious company).</p>
				</div>
				<div id="content4" onmouseenter="dropDown(this.id)" onmouseleave="dropUp(this.id)">
					<span>Version</span>
					<p id="dropDownContent4">Version 1.0</p>
				</div>
			</div>
			
			<br/>
						
			<img id="cloud" class="cloud" src="../Media/cloud.PNG"></img>
			
			<div class="row">
			
				<div class="column side" id="left">
					<div class="frame">
						<header>Favorite Kid Videos/Websites</header>
						<p>Instructions:  In this section, you get to add as many of your favorite kid videos from Youtube or web pages as
						you like.  Just navigate to your video on <a href="https://www.youtube.com/results?search_query=kids+songs">YouTube.com</a>, 
						click on share at the bottom of the video, click on embed, copy the src="the stuff between the quotes" section (leave the quotes out), paste it into the "URL/Website" here, click submit, and 
						your video will be added below!  If you want to add a website just copy the entire URL and paste it here and click Add to add it below!  Now 
						everytime you visit this application your videos or websites will automatically be loaded as well!</p>
						<p>Here is a sample URL for you to practice with:</p>
						<p>https://www.youtube.com/embed/vp5rwesz8eU</p>
						<p>(Copy and paste these below)</p>
						<input type="text" placeholder="URL/Website" id="URL"></input>
						<button onclick="addFrame()">Add</button>
						<br/><br/>
					</div>
					<br/>
				</div>
				
				<div class="column middle">
				
					<div class="buttons">
						<select class="options" id="options">
							<option value="60">1 min</option>
							<option value="120">2 mins</option>
							<option value="180">3 mins</option>
							<option value="240">4 mins</option>
							<option value="300">5 mins</option>
							<option value="360">6 mins</option>
							<option value="420">7 mins</option>
							<option value="480">8 mins</option>
							<option value="540">9 mins</option>
							<option value="600">10 mins</option>
							<option value="660">11 mins</option>
							<option value="720">12 mins</option>
							<option value="780">13 mins</option>
							<option value="840">14 mins</option>
							<option value="900">15 mins</option>
						</select>
						
						<img id="play" class="largeImg" onclick="start('timer')" src="../Media/play.png"></img>
						
						<img id="pause" class="smallImg" onclick="pause('timer')" src="../Media/pause.PNG"></img>
						
						<img id="stop" class="smallImg" onclick="stop('timer')" src="../Media/stop.jpg"></img>
					</div>
				
					<div class="timer" id="timer">
						
					</div>
					
				</div>
				
				<div class="column side" id="right">
					<div class="weather">
						<header>Weather:</header>
						<input type="text" placeholder="City" id="city"></input>
						<select id="state">
							<option value="AL">Alabama</option>
							<option value="AK">Alaska</option>
							<option value="AZ">Arizona</option>
							<option value="AR">Arkansas</option>
							<option value="CA">California</option>
							<option value="CO">Colorado</option>
							<option value="CT">Connecticut</option>
							<option value="DE">Delaware</option>
							<option value="FL">Florida</option>
							<option value="GA">Georgia</option>
							<option value="HI">Hawaii</option>
							<option value="ID">Idaho</option>
							<option value="IL">Illinois</option>
							<option value="IN">Indiana</option>
							<option value="IA">Iowa</option>
							<option value="KS">Kansas</option>
							<option value="KY">Kentucky</option>
							<option value="LA">Louisiana</option>
							<option value="ME">Maine</option>
							<option value="MD">Maryland</option>
							<option value="MA">Massachusetts</option>
							<option value="MI">Michigan</option>
							<option value="MN">Minnesota</option>
							<option value="NE">Nebraska</option>
							<option value="NV">Nevada</option>
							<option value="NH">New Hampshire</option>
							<option value="NJ">New Jersey</option>
							<option value="NM">New Mexico</option>
							<option value="NY">New York</option>
							<option value="NC">North Carolina</option>
							<option value="ND">North Dakota</option>
							<option value="OH">Ohio</option>
							<option value="OK">Oklahoma</option>
							<option value="OR">Oregon</option>
							<option value="PA">Pennsylvania</option>
							<option value="RI">Rhode Island</option>
							<option value="SC">South Carolina</option>
							<option value="SD">South Dakota</option>
							<option value="TN">Tennessee</option>
							<option value="TX">Texas</option>
							<option value="UT">Utah</option>
							<option value="VT">Vermont</option>
							<option value="VA">Virginia</option>
							<option value="WA">Washington</option>
							<option value="WV">West Virginia</option>
							<option value="WI">Wisconsin</option>
							<option value="WY">Wyoming</option>
						</select>
						<button onclick="getWeather()">Submit</button>
						<br/><br/>
					</div>
					<br/>
					<div id="status" class="weather"></div>
					<div id="weather" class="weather"></div>
					<a href="https://www.yahoo.com/?ilc=401" target="_blank"> <img src="https://poweredby.yahoo.com/purple.png" width="134" height="29"/> </a>
					
				</div>
				
			</div>
			
			<img id="horse" src="../Media/horse.png" onmouseover="horseRocket(this.id)"></img>
			<img id="rocket" src="../Media/rocket.png" onmouseover="horseRocket(this.id)"></img>
			
			<br/>
			
			<audio id="horseAudio" src="../Media/horse.wav" ></audio>
			<audio id="rocketAudio" src="../Media/rocket.wav" ></audio>
			<audio id="elephantAudio" src="../Media/elephant.wav" ></audio>
			<audio id="timerAudio" src="../Media/clock.wav" loop></audio>
			
			<noscript>JavaScript is required for this site!  Please use a JavaScript enabled browser.  Thank you!</noscript>
			<script language="javascript" type="text/javascript">
			
				<!-- Global Variables/Objects: -->
				var count = 1;
				var transitionCount = 1;
				var videos = [];
				
				<!-- Add Event Listeners Here: -->
					
				window.addEventListener("load", clock);
				
				window.addEventListener("load", weatherDefault);
				
				window.addEventListener("load", background);
				
				window.addEventListener("load", addFramesDefault);
				
				document.getElementById('timer').addEventListener("animationend", stopTimer);
				document.getElementById('timer').addEventListener("webkitAnimationEnd", stopTimer);
				
				
				function clock() {
					var time = new Date();
					var hour = time.getHours();
					var mins = time.getMinutes();
					var amPM = "am";
					mins = zeros(mins);
					
					if (hour >= 12) {
						amPM = "pm";}
					
					if (hour > 12) {
						hour = hour - 12;}
					else if (hour == 0) {
						hour = hour + 12}
					
					document.getElementById('clock').innerHTML = hour + ":" + mins + amPM;
					setInterval(clock, 10000);}
					
				function zeros(z) {
					if (z < 10) {
						z = "0" + z}
						return z;}
						
				function background() {
					var time = new Date();
					var hour = time.getHours();
					var body = document.getElementById('body');
					var star = document.getElementById('star');
					var cloud = document.getElementById('cloud');
					var horse = document.getElementById('horse');
					var rocket = document.getElementById('rocket');
					
					if (hour >= 7 && hour <=18) {
						body.className = "day";
						star.style.visibility = "hidden";
						cloud.style.visibility = "visible";
						horse.style.visibility = "visible";
						rocket.style.visibility = "hidden";}
					else {
						body.className = "night";
						cloud.style.visibility = "hidden";
						star.style.visibility = "visible";
						horse.style.visibility = "hidden";
						rocket.style.visibility = "visible";}}
				
				function dropDown(id) {
					if (id == "content1") {
						document.getElementById("dropDownContent1").style.display = "block";}
					else if (id == "content2") {
						document.getElementById("dropDownContent2").style.display = "block";}
					else if (id == "content3") {
						document.getElementById("dropDownContent3").style.display = "block";}
					else {
						document.getElementById("dropDownContent4").style.display = "block";}}
					
				function dropUp(id) {
					if (id == "content1") {
						document.getElementById("dropDownContent1").style.display = "none";}
					else if (id == "content2") {
						document.getElementById("dropDownContent2").style.display = "none";}
					else if (id == "content3") {
						document.getElementById("dropDownContent3").style.display = "none";}
					else {
						document.getElementById("dropDownContent4").style.display = "none";}}
						
				function start(id) {
					var timer = document.getElementById(id);
					var secs = document.getElementById('options').value;
					var audio = document.getElementById('timerAudio');
					
					timer.style.animation = "startTimer " + secs + "s " + "linear";
					audio.play();}
					
				function stop(id) {
					var timer = document.getElementById(id);
					var audio = document.getElementById('timerAudio');
					
					timer.style.animation = "none";
					
					audio.pause();
					audio.currentTime = 0;}
					
				function stopTimer() {
					var audio = document.getElementById('timerAudio');
					audio.pause();
					audio.currentTime = 0;
					alarm();}
					
				function pause(id) {
					var timer = document.getElementById(id);
					var audio = document.getElementById('timerAudio');
					
					if (timer.style.webkitAnimationPlayState == 'running') {
						timer.style.webkitAnimationPlayState = 'paused';}
					else {
						timer.style.webkitAnimationPlayState = "running";}
					
					audio.pause();}
						
				function weatherDefault() {
					var city = localStorage.getItem("city");
					var state = localStorage.getItem("state");
					
					if (city == null || state == null) {
						localStorage.setItem("city", "Waxhaw");
						localStorage.setItem("state", "NC");
						city = "Waxhaw";
						state = "NC";}
					
					weather(city, state);}
					
				function getWeather() {
					var city = document.getElementById('city').value;
					var state = document.getElementById('state').value;
					
					weather(city, state);}
						
				function weather(c, s) {
					var weather = new XMLHttpRequest();
					var city = c;
					var state = s;
					var endpoint = "https://query.yahooapis.com/v1/public/yql?q=select * from weather.forecast where woeid in (select woeid from geo.places(1) where text='" + city + ", " + state + "')&format=json";
					
					weather.onreadystatechange = function() {
					if (this.readyState == 4 && this.status == 200) {
						var weatherJSON = JSON.parse(this.responseText);
						document.getElementById('weather').innerHTML = city + ", " + state + weatherJSON.query.results.channel.item.description;}
					else {
						var status = this.statusText;
						document.getElementById('status').innerHTML = status;}};
					
					weather.open("GET", endpoint, true);
					weather.send();
					
					localStorage.setItem("city", city);
					localStorage.setItem("state", state);}
					
				function addFramesDefault() {
					var getVideos = localStorage.getItem("videos");
					
					if (getVideos == null) {
						return;}
					else {
						var videos = JSON.parse(getVideos);
						videos.forEach(frameDefault);}}
						
				function frameDefault(url) {
					var storageCount = localStorage.getItem("count");
					if (storageCount == null) {
						localStorage.setItem("count", count);}
					else {
						count = storageCount;}
						
					var video = document.createElement("iframe");
					video.src = url;
					video.id = "frame" + count;
					video.width = "100%";
					video.height = "250";
					video.frameborder = "0";
					video.gesture = "media";
					video.allow = "encrypted-media";
					video.setAttribute('allowFullScreen', '');
					var br = document.createElement("br");
					var button = document.createElement("button");
					button.innerHTML = "Remove";
					button.id = count;
					button.setAttribute("onclick", "removeFrame(this.id)");
					
					document.getElementById('left').appendChild(video);
					document.getElementById('left').appendChild(button);
					document.getElementById('left').appendChild(br);
					
					count++;
					localStorage.setItem("count", count);}
					
				function addFrame() {
					var storageCount = localStorage.getItem("count");
					if (storageCount == null) {
						localStorage.setItem("count", count);}
					else {
						count = localStorage.getItem("count");}
						
					var url = document.getElementById('URL').value;
					var video = document.createElement("iframe");
					video.src = url;
					video.id = "frame" + count;
					video.width = "100%";
					video.height = "150";
					video.frameborder = "0";
					video.gesture = "media";
					video.allow = "encrypted-media";
					video.setAttribute('allowFullScreen', '');
					var br = document.createElement("br");
					var button = document.createElement("button");
					button.innerHTML = "Remove";
					button.id = count;
					button.setAttribute("onclick", "removeFrame(this.id)");
					
					document.getElementById('left').appendChild(video);
					document.getElementById('left').appendChild(button);
					
					count++;
					localStorage.setItem("count", count);
					videos.splice(0, 0, url);
					saveFrames();}
					
				function removeFrame(id) {
					var frameID = "frame" + id;
					var frame = document.getElementById(frameID);
					var button = document.getElementById(id);
					
					var url = document.getElementById(frameID).src;
					
					var index = videos.indexOf(url);
					videos.splice(index, 1);
					
					document.getElementById('left').removeChild(frame);
					document.getElementById('left').removeChild(button);
					saveFrames();}
				
				function saveFrames() {
					var videosJSON = JSON.stringify(videos);
					
					localStorage.setItem("videos", videosJSON);}
					
				function horseRocket(id) {
					var element = document.getElementById(id);
					
					if (transitionCount == 3) {
						transitionCount = 1;}
					
					if ((id == "horse" || id == "rocket") && transitionCount == 1) {
						element.style.right = "75%";
						element.style.transform = "scaleX(-1)";
						if (id == "horse") {
							playHorse();}
						else {
							playRocket();}}
					else {
						element.style.right = "5%";
						element.style.transform = "scaleX(1)";
						if (id == "horse") {
							playHorse();}
						else {
							playRocket();}}
						
					transitionCount++;}
					
					function playRocket() {
						var audio = document.getElementById('rocketAudio');
						audio.play();}
						
					function playHorse() {
						var audio = document.getElementById('horseAudio');
						audio.play();}
						
					function alarm() {
						var audio = document.getElementById('elephantAudio');
						audio.play();}
					
			</script>
		</body>
		
	</html>